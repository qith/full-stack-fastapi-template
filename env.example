# ============================================
# PMinfo 系统环境变量配置示例
# ============================================
# 复制此文件为 .env 并修改相应的值
# cp env.example .env

# ============================================
# 基础环境配置
# ============================================
ENVIRONMENT=production
# 可选值: local, staging, production

DOMAIN=localhost
# 域名配置（用于Traefik部署）
# IP+端口访问时可以使用 localhost

STACK_NAME=pminfo
# Docker Compose 堆栈名称

# ============================================
# 项目配置
# ============================================
PROJECT_NAME=PMinfo
# 项目名称，用于API文档和邮件

DOCKER_IMAGE_BACKEND=pminfo-backend
DOCKER_IMAGE_FRONTEND=pminfo-frontend
TAG=latest

# ============================================
# IP+端口访问配置（使用 docker-compose.ip.yml 时需要）
# ============================================
PUBLIC_HOST=192.168.1.100
# 服务器公网IP地址
# 仅在 IP+端口访问模式下使用（docker-compose.ip.yml）
# 使用命令获取: hostname -I | awk '{print $1}'

# ============================================
# 前端和后端访问配置
# ============================================
FRONTEND_HOST=http://192.168.1.100:8880
# 前端访问地址
# IP+端口模式: http://YOUR_IP:8880
# 域名模式: https://dashboard.yourdomain.com

BACKEND_CORS_ORIGINS=["http://192.168.1.100:8880"]
# CORS允许的来源列表（JSON格式）
# IP+端口模式: ["http://YOUR_IP:8880"]
# 域名模式: ["https://dashboard.yourdomain.com","https://api.yourdomain.com"]

# ============================================
# 安全配置（必须修改！）
# ============================================
SECRET_KEY=changethis
# 用于签名JWT令牌的密钥
# 生成命令: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
# 或: openssl rand -base64 32

# ============================================
# 超级用户配置（第一个管理员账户）
# ============================================
FIRST_SUPERUSER=admin@example.com
# 第一个超级用户的邮箱（必须修改！）

FIRST_SUPERUSER_PASSWORD=changethis
# 第一个超级用户的密码（必须修改！）

# ============================================
# 数据库配置
# ============================================
POSTGRES_SERVER=db
# 数据库服务器地址（Docker Compose内部使用db）

POSTGRES_PORT=5432
# 数据库端口

POSTGRES_USER=app
# 数据库用户名

POSTGRES_PASSWORD=changethis
# 数据库密码（必须修改！）
# 生成命令: python3 -c "import secrets; print(secrets.token_urlsafe(32))"

POSTGRES_DB=app
# 数据库名称

# ============================================
# 邮件配置（可选，用于密码重置等功能）
# ============================================
SMTP_HOST=
# SMTP服务器地址，例如: smtp.gmail.com

SMTP_USER=
# SMTP用户名

SMTP_PASSWORD=
# SMTP密码

SMTP_PORT=587
# SMTP端口

SMTP_TLS=true
# 是否使用TLS

EMAILS_FROM_EMAIL=noreply@example.com
# 发送邮件的发件人地址

EMAILS_FROM_NAME=
# 发送邮件的发件人名称（可选，默认使用PROJECT_NAME）

# ============================================
# 监控和错误追踪（可选）
# ============================================
SENTRY_DSN=
# Sentry DSN用于错误监控（可选）

# ============================================
# 部署模式说明
# ============================================
# 
# 1. IP+端口访问模式（使用 docker-compose.ip.yml）:
#    - 需要设置 PUBLIC_HOST
#    - FRONTEND_HOST=http://YOUR_IP:8880
#    - BACKEND_CORS_ORIGINS=["http://YOUR_IP:8880"]
#    - 命令: docker compose -f docker-compose.yml -f docker-compose.ip.yml up -d
#
# 2. 域名访问模式（使用 Traefik）:
#    - 不需要 PUBLIC_HOST
#    - FRONTEND_HOST=https://dashboard.yourdomain.com
#    - BACKEND_CORS_ORIGINS=["https://dashboard.yourdomain.com","https://api.yourdomain.com"]
#    - 命令: docker compose -f docker-compose.yml up -d
#
# ============================================

